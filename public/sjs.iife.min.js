var SeaSideJS=function(e){"use strict";const t=new WeakMap;function n(e,o){"object"==typeof e&&null!=e||(e={value:e,__isWrappedValue:!0});const a=new Map,r={get(e,t,a){const r=Reflect.get(e,t,a);return"object"==typeof r&&null!==r?o?n(r,o):n(r):r},set(e,n,a,r){if(e[n]===a)return!0;const s=Reflect.set(e,n,a,r),c=t.get(r);if(c){const e=c.get(n);e&&e.forEach((e=>e(a)))}return o&&o(a),s}},s=new Proxy(e,r);return t.set(s,a),s}const o=new Map([["input","input"],["textarea","input"],["select","change"],["img","load"]]);function a(e,t,n){"class"===t?e.classList.add(n):"style"===t?Object.assign(e.style,n):e.setAttribute(t,n)}function r(e){for(const[t,n]of o.entries())if(e.tagName.toLowerCase()===t)return n}function s(e,t,n){const o=e.cloneNode(!0);for(const e in n)n[e]=n[e].bind(t);return function e(o){if(o.nodeType!==Node.ELEMENT_NODE||"nocompile"!==o.tagName.toLowerCase())if(o.nodeType===Node.TEXT_NODE){const e=/{{\s*((?:.|\n)+?)\s*}}/g,a=o.textContent;(()=>{let r,s=a;for(;null!==(r=e.exec(a));){const e=r[1];try{const o=new Function("data","methods",`with(data) { with(methods) { return ${e}; } }`)(t,n);s=s.replace(r[0],void 0!==o?o:r[0])}catch(t){console.error(`Error executing code '${e}' in template:`,t)}}o.textContent=s})()}else if(o.nodeType===Node.ELEMENT_NODE){const s=o;Array.from(s.attributes).forEach((e=>{if(e.name.startsWith("@")){const o=e.name.substring(1),a=e.value,r=n[a]||new Function("data","methods","event",`with(data) { with(methods) { ${a} } }`);s.addEventListener(o,(e=>r(t,n,e))),s.removeAttribute(e.name)}else if(e.name.startsWith(":")){const o=e.name.substring(1),r=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${r}; } }`)(t,n);a(s,o,e)}catch(e){console.error(`Error executing code '${r}' in template:`,e)}})(),s.removeAttribute(e.name)}else if(e.name.startsWith("#model")){let o;"#model"===e.name?o="value":e.name.startsWith("#model:")&&(o=e.name.substring(7));if(["input","select","textarea"].includes(s.tagName.toLowerCase())){const c=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${c}; } }`)(t,n);a(s,o,e)}catch(e){console.error(`Error executing code '${c}' in template:`,e)}})();const d=r(s);if(!d)return;const i=e=>{let o=e.target.value;if(o){new Function("data","methods",`with(data) { with(methods) { ${c} = "${o}"; } }`)(t,n)}else{new Function("data","methods",`with(data) { with(methods) { ${c} = ""; } }`)(t,n)}};s.addEventListener(d,i)}s.removeAttribute(e.name)}else if("#show"===e.name){const o=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${o}; } }`)(t,n);s.style.display=e?"":"none"}catch(e){console.error(`Error executing code '${o}' in #show directive:`,e)}})(),s.removeAttribute("#show")}else if("#if"===e.name){const o=e.value,a=document.createComment("sea-placeholder");let r=!0;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${o}; } }`)(t,n);e&&!r?(a.parentNode.insertBefore(s,a),a.parentNode.removeChild(a),r=!0):!e&&r&&(s.parentNode.insertBefore(a,s),s.parentNode.removeChild(s),r=!1)}catch(e){console.error(`Error executing code '${o}' in #if directive:`,e)}})(),s.removeAttribute("#if")}else e.name})),o.childNodes.forEach((t=>e(t)))}else o.childNodes.forEach((t=>e(t)))}(o),o}class c{_root;static _template;static _data;static _methods;static _mounted;static createApp(e){return this._template=e.template,this._data=e.data(),this._methods=e.methods,e.mounted&&(this._mounted=e.mounted),new c}get root(){return this._root}get template(){return c._template}mount(e){if(this._root=e,c._template){let e=function(e,t=0){let n=e.length,o=t^n,a=0;const r=3432918353,s=461845907;for(;n>=4;){let t=255&e.charCodeAt(a)|(255&e.charCodeAt(a+1))<<8|(255&e.charCodeAt(a+2))<<16|(255&e.charCodeAt(a+3))<<24;t=t*r&4294967295,t=t<<15|t>>>17,t=t*s&4294967295,o^=t,o=o<<13|o>>>19,o=5*o+3864292196&4294967295,n-=4,a+=4}if(n>0){let t=0;switch(n){case 3:t^=(255&e.charCodeAt(a+2))<<16;case 2:t^=(255&e.charCodeAt(a+1))<<8;case 1:t^=255&e.charCodeAt(a),t=t*r&4294967295,t=t<<15|t>>>17,t=t*s&4294967295,o^=t}}return o^=e.length,o^=o>>>16,o=2246822507*o&4294967295,o^=o>>>13,o=3266489909*o&4294967295,o^=o>>>16,o>>>0}(window.location.href+"_instance_sea_side_js_"+Math.random().toString(36));const t=document.createElement("template");"string"==typeof c._template?t.innerHTML=c._template:t.content.appendChild(c._template);const o=t.content;c._data=n(c._data,(()=>{const t=document.querySelector("#app_"+e+"_sea_side_js");if(t){const n=s(o,c._data,c._methods),a=document.createElement("div");a.setAttribute("id","app_"+e+"_sea_side_js"),a.appendChild(n),function(e,t){!function e(t,n){if(t.nodeType===Node.TEXT_NODE&&n.nodeType===Node.TEXT_NODE)t.textContent!==n.textContent&&(t.textContent=n.textContent);else if(t.nodeType===Node.ELEMENT_NODE&&n.nodeType===Node.ELEMENT_NODE){const o=t,a=n;if(o.tagName!==a.tagName)return void o.replaceWith(a.cloneNode(!0));const r=Array.from(o.attributes),s=Array.from(a.attributes);if(r.forEach((e=>{a.hasAttribute(e.name)||o.removeAttribute(e.name)})),s.forEach((e=>{o.getAttribute(e.name)!==e.value&&o.setAttribute(e.name,e.value)})),["INPUT","TEXTAREA","SELECT"].includes(o.tagName)){const e=o,t=a;if(e.value!==t.value&&(e.value=t.value),"SELECT"===e.tagName){const e=o,t=a;e.selectedIndex!==t.selectedIndex&&(e.selectedIndex=t.selectedIndex);const n=a.getAttribute("value");if(n){const t=e.querySelector(`option[value="${n}"]`);if(t){e.value=n;const o=e.querySelector("option[selected]");o&&o.removeAttribute("selected"),t.setAttribute("selected","")}}}}const c=Math.max(o.childNodes.length,a.childNodes.length);for(let t=0;t<c;t++){const n=o.childNodes[t],r=a.childNodes[t];!n&&r?o.appendChild(r.cloneNode(!0)):n&&!r?o.removeChild(n):n&&r&&(r.nodeType===Node.COMMENT_NODE&&r.textContent?.startsWith("sea-placeholder")?n.nodeType===Node.COMMENT_NODE&&n.textContent?.startsWith("sea-placeholder")||o.replaceChild(r.cloneNode(!0),n):n.nodeType===Node.COMMENT_NODE&&n.textContent?.startsWith("sea-placeholder")?r.nodeType===Node.COMMENT_NODE&&r.textContent?.startsWith("sea-placeholder")||o.replaceChild(r.cloneNode(!0),n):n.isEqualNode(r)||e(n,r))}}}(e,t)}(t,a)}}));const a=s(o,c._data,c._methods),r=document.createElement("div");r.setAttribute("id","app_"+e+"_sea_side_js"),r.appendChild(a);const d=document.querySelector(this._root);d&&(d.appendChild(r),c._mounted&&(c._mounted=c._mounted.bind(c._data),c._mounted()))}return this}}return e.createTemplate=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content},e.default=c,e.getTemplate=function(e){const t=document.querySelector(e);return t?t.content:document.createDocumentFragment()},e.reactive=n,e.useModel=function(e,n,o,s){a(o,s,e[n]);const c=t.get(e);c&&(c.has(n)||c.set(n,new Set),c.get(n).add((e=>{a(o,s,e)})));const d=r(o);if(!d)return()=>{};const i=t=>{e[n]=s in o?t.target[s]:o.getAttribute(s)};return o.addEventListener(d,i),()=>{if(c){const e=c.get(n);e&&e.clear()}o.removeEventListener(d,i)}},e.useProxyModel=function(e,n,o,a){const r=t.get(e),s=t.get(o);return r&&s&&(r.has(n)||r.set(n,new Set),s.has(a)||s.set(a,new Set),r.get(n).add((e=>{o[a]=e})),s.get(a).add((t=>{e[n]=t}))),()=>{if(r){const e=r.get(n);e&&e.clear()}if(s){const e=s.get(a);e&&e.clear()}}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
