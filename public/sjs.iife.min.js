var SeaSideJS=function(e){"use strict";const t=new WeakMap;function n(e,o){"object"==typeof e&&null!=e||(e={value:e,__isWrappedValue:!0});const r=new Map,a={get(e,t,r){const a=Reflect.get(e,t,r);return"object"==typeof a&&null!==a?o?n(a,o):n(a):a},set(e,n,r,a){if(e[n]===r)return!0;const s=Reflect.set(e,n,r,a),d=t.get(a);if(d){const e=d.get(n);e&&e.forEach((e=>e(r)))}return o&&o(r),s}},s=new Proxy(e,a);return t.set(s,r),s}const o=new Map([["input","input"],["textarea","input"],["select","change"],["img","load"]]);function r(e,t,n){"class"===t?e.classList.add(n):"style"===t?Object.assign(e.style,n):e.setAttribute(t,n)}function a(e){for(const[t,n]of o.entries())if(e.tagName.toLowerCase()===t)return n}function s(e,t,n,o){if(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE){const r="node-"+o.value++,a=e.nodeType===Node.ELEMENT_NODE?e.attributes:null,s={};n[r]={node:e,attrs:a,events:s},t.set(e,r)}e.childNodes.forEach((e=>s(e,t,n,o)))}function d(e,t,n){const o=e.cloneNode(!0);for(const e in n)n[e]=n[e].bind(t);const c=new Map,i={};return s(o,c,i,{value:0}),function e(o){if(o.nodeType!==Node.ELEMENT_NODE||"nocompile"!==o.tagName.toLowerCase())if(o.nodeType===Node.TEXT_NODE){const e=/{{\s*((?:.|\n)+?)\s*}}/g,r=o.textContent;(()=>{let a,s=r;for(;null!==(a=e.exec(r));){const e=a[1];try{const o=new Function("data","methods",`with(data) { with(methods) { return ${e}; } }`)(t,n);s=s.replace(a[0],void 0!==o?o:a[0])}catch(t){console.error(`Error executing code '${e}' in template:`,t)}}o.textContent=s})()}else if(o.nodeType===Node.ELEMENT_NODE){const s=o,l=c.get(o);if(!l)return;const{attrs:u,events:h}=i[l];u&&Array.from(u).forEach((e=>{if(e.name.startsWith("@")){const o=e.name.substring(1),r=e.value,a=n[r]||new Function("data","methods","event",`with(data) { with(methods) { ${r} } }`);s.addEventListener(o,(e=>a(t,n,e))),s.removeAttribute(e.name),h[o]=a}else if(e.name.startsWith(":")){const o=e.name.substring(1),a=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${a}; } }`)(t,n);r(s,o,e)}catch(e){console.error(`Error executing code '${a}' in template:`,e)}})(),s.removeAttribute(e.name)}else if(e.name.startsWith("#model")){let o;"#model"===e.name?o="value":e.name.startsWith("#model:")&&(o=e.name.substring(7));if(["input","select","textarea"].includes(s.tagName.toLowerCase())){const d=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${d}; } }`)(t,n);r(s,o,e)}catch(e){console.error(`Error executing code '${d}' in template:`,e)}})();const c=a(s);if(!c)return;const i=e=>{let o=e.target.value;if(o){new Function("data","methods",`with(data) { with(methods) { ${d} = "${o}"; } }`)(t,n)}else{new Function("data","methods",`with(data) { with(methods) { ${d} = ""; } }`)(t,n)}};s.addEventListener(c,i),h[c]=i}s.removeAttribute(e.name)}else if("#show"===e.name){const o=e.value;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${o}; } }`)(t,n);s.style.display=e?"":"none"}catch(e){console.error(`Error executing code '${o}' in #show directive:`,e)}})(),s.removeAttribute("#show")}else if("#if"===e.name){const o=e.value,r=document.createComment("sea-placeholder");let a=!0;(()=>{try{const e=new Function("data","methods",`with(data) { with(methods) { return ${o}; } }`)(t,n);e&&!a?(r.parentNode.insertBefore(s,r),r.parentNode.removeChild(r),a=!0):!e&&a&&(s.parentNode.insertBefore(r,s),s.parentNode.removeChild(s),a=!1)}catch(e){console.error(`Error executing code '${o}' in #if directive:`,e)}})(),s.removeAttribute("#if")}else if("#for"===e.name){const o=e.value,r=/^\s*(\w+)\s+in\s+((?:.|\n)+?)\s*$/.exec(o);if(r){const e=r[1],o=r[2],a=document.createComment("sea-placeholder-for");s.parentNode.insertBefore(a,s),s.removeAttribute("#for"),s.parentNode.removeChild(s);(()=>{try{const r=new Function("data","methods",`with(data) { with(methods) { return ${o}; } }`)(t,n);if(Array.isArray(r)){const o=document.createDocumentFragment();r.forEach(((r,a)=>{const c=d(s.cloneNode(!0),{...t,[e]:r,$index:a},n);o.appendChild(c.node)})),s.remove(),a.parentNode.insertBefore(o,a.nextSibling)}else console.error(`Error: the value of '${o}' is not an array.`)}catch(e){console.error(`Error executing code '${o}' in #for directive:`,e)}})()}else console.error('Error: Invalid #for directive syntax. Expected format: "item in list".')}})),o.childNodes.forEach((t=>e(t)))}else o.childNodes.forEach((t=>e(t)));else{const e=o.childNodes,t=document.createDocumentFragment();for(let n=0;n<e.length;n++)t.appendChild(e[n].cloneNode(!0));o.parentNode.replaceChild(t,o)}}(o),{node:o,idMap:c,nodeTree:i}}class c{_root;static _template;static _data;static _methods;static _mounted;static createApp(e){return this._template=e.template,this._data=e.data(),this._methods=e.methods,e.mounted&&(this._mounted=e.mounted),new c}get root(){return this._root}get template(){return c._template}mount(e){if(this._root=e,c._template){let e=function(e,t=0){let n=e.length,o=t^n,r=0;const a=3432918353,s=461845907;for(;n>=4;){let t=255&e.charCodeAt(r)|(255&e.charCodeAt(r+1))<<8|(255&e.charCodeAt(r+2))<<16|(255&e.charCodeAt(r+3))<<24;t=t*a&4294967295,t=t<<15|t>>>17,t=t*s&4294967295,o^=t,o=o<<13|o>>>19,o=5*o+3864292196&4294967295,n-=4,r+=4}if(n>0){let t=0;switch(n){case 3:t^=(255&e.charCodeAt(r+2))<<16;case 2:t^=(255&e.charCodeAt(r+1))<<8;case 1:t^=255&e.charCodeAt(r),t=t*a&4294967295,t=t<<15|t>>>17,t=t*s&4294967295,o^=t}}return o^=e.length,o^=o>>>16,o=2246822507*o&4294967295,o^=o>>>13,o=3266489909*o&4294967295,o^=o>>>16,o>>>0}(window.location.href+"_instance_sea_side_js_"+Math.random().toString(36));const t=document.createElement("template");"string"==typeof c._template?t.innerHTML=c._template:t.content.appendChild(c._template);const o=t.content;c._data=n(c._data,(()=>{const t=document.querySelector("#app_"+e+"_sea_side_js");if(t){const{node:n,idMap:r,nodeTree:a}=d(o,c._data,c._methods),s=document.createElement("div");s.setAttribute("id","app_"+e+"_sea_side_js"),s.appendChild(n),function(e,t,n,o){!function e(t,r){if(t.nodeType===Node.TEXT_NODE&&r.nodeType===Node.TEXT_NODE)t.textContent!==r.textContent&&(t.textContent=r.textContent);else if(t.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE){const a=t,s=r;if(a.tagName!==s.tagName)return void a.replaceWith(s.cloneNode(!0));const d=Array.from(a.attributes),c=Array.from(s.attributes);if(d.forEach((e=>{s.hasAttribute(e.name)||a.removeAttribute(e.name)})),c.forEach((e=>{a.getAttribute(e.name)!==e.value&&a.setAttribute(e.name,e.value)})),["INPUT","TEXTAREA","SELECT"].includes(a.tagName)){const e=a,t=s;if(e.value!==t.value&&(e.value=t.value),"SELECT"===e.tagName){const e=a,t=s;e.selectedIndex!==t.selectedIndex&&(e.selectedIndex=t.selectedIndex);const n=s.getAttribute("value");if(n){const t=e.querySelector(`option[value="${n}"]`);if(t){e.value=n;const o=e.querySelector("option[selected]");o&&o.removeAttribute("selected"),t.setAttribute("selected","")}}}}const i=Math.max(a.childNodes.length,s.childNodes.length);for(let t=0;t<i;t++){const r=a.childNodes[t],d=s.childNodes[t];if(!r&&d)a.appendChild(d.cloneNode(!0));else if(r&&!d)a.removeChild(r);else if(r&&d)if(d.nodeType===Node.COMMENT_NODE&&d.textContent?.startsWith("sea-placeholder"))r.nodeType===Node.COMMENT_NODE&&r.textContent?.startsWith("sea-placeholder")||a.replaceChild(d.cloneNode(!0),r);else if(r.nodeType===Node.COMMENT_NODE&&r.textContent?.startsWith("sea-placeholder")){if(d.nodeType!==Node.COMMENT_NODE||!d.textContent?.startsWith("sea-placeholder")){const e=d.cloneNode(!0),t=o.get(d),s=n[t];s&&s.events&&Object.keys(s.events).forEach((t=>{const n=s.events[t];e.addEventListener(t,n)})),a.replaceChild(e,r)}}else r.isEqualNode(d)||e(r,d)}}}(e,t)}(t,s,a,r)}}));const{node:r,idMap:a,nodeTree:s}=d(o,c._data,c._methods),i=document.createElement("div");i.setAttribute("id","app_"+e+"_sea_side_js"),i.appendChild(r);const l=document.querySelector(this._root);l&&(l.appendChild(i),c._mounted&&(c._mounted=c._mounted.bind(c._data),c._mounted()))}return this}}return e.createTemplate=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content},e.default=c,e.getTemplate=function(e){const t=document.querySelector(e);return t?t.content:document.createDocumentFragment()},e.reactive=n,e.useModel=function(e,n,o,s){r(o,s,e[n]);const d=t.get(e);d&&(d.has(n)||d.set(n,new Set),d.get(n).add((e=>{r(o,s,e)})));const c=a(o);if(!c)return()=>{};const i=t=>{e[n]=s in o?t.target[s]:o.getAttribute(s)};return o.addEventListener(c,i),()=>{if(d){const e=d.get(n);e&&e.clear()}o.removeEventListener(c,i)}},e.useProxyModel=function(e,n,o,r){const a=t.get(e),s=t.get(o);return a&&s&&(a.has(n)||a.set(n,new Set),s.has(r)||s.set(r,new Set),a.get(n).add((e=>{o[r]=e})),s.get(r).add((t=>{e[n]=t}))),()=>{if(a){const e=a.get(n);e&&e.clear()}if(s){const e=s.get(r);e&&e.clear()}}},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
